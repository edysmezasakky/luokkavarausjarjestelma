<!DOCTYPE html>
<html lang="fi">
    <head>
        <meta charset="utf-8">
        <title>Luokat</title>
        <style>
            body { font-family: Arial, sans-serif; margin: 20px;}
            .container {max-width: 500px; margin: auto;}
            .class-info { background: #f9f9f9; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd}
            form { display: flex; flex-direction: column; gap: 10px;}
            input, select {padding: 8px; font-size: 14px;}
            button { padding: 10px; background: #007bff; color: #fff; border: none; cursor: pointer;}
            button:hover { background: #0056b3;}
            .message { margin-top: 15px; font-weight: bold;}
            .back-link {display: inline-block; margin-top: 20px; text-decoration: none; color: #007bff;}
            .back-link:hover {text-decoration: underline;}

        </style>
        </head>
        <body>
            <div class="container">
                <h1>Varaa luokka</h1>
                <div id="classInfo" class="class-info" style="display:none;"></div>
                <form id="reservationForm">
                    <label for="classSelect">Valitse luokka</label>
                    <select id="classSelect">required</select>

                    <label for="startTime">Alkamisaika</label>
                    <input type="datetime-local" id="startTime" required>

                    <label for="endTime">Päätymisaika</label>
                    <input type="datetime-local" id="endTime" required>

                    <label for="purpose">Tarkoitus</label>
                    <input type="text" id="purpose" placeholder="Esim. luento" required>

                    <label for="participants">Osallistujen määrä:</label>
                    <input type="number" id="participants" min="1" required>
                    <button type="submit">Varaa</button>
                </form>
                <div class="message" id="message"></div>

                <!-- Linkki takaisin -->
                 <a href="clacess.html" class="back-link"> Takaisin luokkalistaukseen</a>
            </div>

            <script>
                const urlParams = new URLSearchParams(window.location.search);
                const selectedClassId = urlParams.get('class_id');

                function loadClasses(){
                    fetch('available_classes.php')
                    .then(response => response.json())
                    .then(data => {
                        const select = document.getElementById('classSelect');
                        select.innerHTML = '';
                        data.data.forEach(c => {
                            const option = document.createElement('option');
                            option.value = c.id;
                            option.textContent = `${c.name} (${c.location})`;
                            if (selectedClassId && selectedClassId == c.id.toString()) {
                                option.selected = true;
                                showClassInfo(c);
                            }
                            select.appendChild(option);
                            
                        });
                    }).then(data => {
                                const selectedClassId = data.data.find(c => c.id == selectedId);
                                showClassInfo(selectedClass);
                            });
                }
            </script>
        </body>
